language: php
php:
- 5.6
- 7.0
- 7.1
- 7.2
cache:
  directories:
  - "$HOME/.composer/cache"
env:
  secure: "ST+ybiKLgqHYA4ZJ8XsFPQJH6WmQ7XqaRWZJLxBUvQuO5tYKfqJXmyDfXG1IQAPjInlXq7oO3O+GcWiLLwYuweF9dcuZrBZdBq0vGWob+zFBKdg8Aa/A3HWfGOaLM8YLfPESLK0Siv0OZ2wBNgCRyLjXDsYRmLgg06Jwx7C8ippvN8Vk2rEFlAaYIiN1P2N1rp/DMkmAunxv4jGoJDGgryIDshnqouX1tcAX0DDUXLkaxojeTJHDtUC72zeZKnrQsvob318PIE7mhltzWPNQz0iRQeGHv8dGby+i7KdlfpMWOTKqE67E+3+g1CcopNVJJb/7k+UQahWqOEiAy0Qox+VShKLRZG1gADcrzP7p3xnX2LSCsB14fKfj90vGiC7j67LAcF9VLPkf98SCXt28VvErilUTwK29d66B2GqlRtU+JcZFhPGbaZaTmy6C3rFKvWkh0g0gBoINCqpssFn2tRzc+7v/OxvK4dglw0kTpmihcFDHQYHNF74fSjf5U70Ro3IZL9NPLLzxRr8Xl3hJPyUn0w1spuX0mXerZUmsFm3Yi+JP0IbICLpeP2qabzbZpCqdG32M7sFA44tFiSckIlonj4AqlrYuSOYHjNIDy9lOLhf1hTNFhXrGDiadVxBNbexQGLlNmqd/WS/ehTGTMVUjYDTmJa4pW2XHkAqASgI="
branches:
  only:
  - master
  - "/^v\\d+\\.\\d+(\\.\\d+)?(-\\S*)?$/"
before_install:
- phpenv config-rm xdebug.ini
install: composer install
script:
- php vendor/bin/phpunit
- php vendor/bin/phpunit --group aws-integration
- "./vendor/bin/phpcs"
after_success:
- vendor/bin/sami.php update phpdoc.php
addons:
  artifacts:
    s3_region: us-east-1
    target_paths: "$TRAVIS_REPO_SLUG/$TRAVIS_BRANCH"
    paths:
    - "./docs/php"
notifications:
  slack:
    rooms:
      secure: UViA/AzWGBfiyy+lLhx/iaJEk+eRYcLkFKELxzeV5SOYVI/wISXf8afhaXjptDEZJ4eitsy865ZaFPgXqo3/CJX7pSRKiOtiqgMgDFoIOlnkTLK11rWrBJwvf9o3LFdtgXVUPYol1iD7yDgxtWi005lcorinrPM3ptKOyy2KByFSK/4V6Zruw6cOIaKer+OZadKJgTd7snMkQY1UKDovSHS0x2a26jZXJ3cuN8CczGd/OvTnONHXnJgMTsBXHWyTC8i1nAnILTAFXruzdEAsUhS+mG1GZdNNID0SGT1zmUSwGqZ81nbUkL6XulBDn950tMMyBV6pQcGaXZhq/HbwMrri1QO+pLZnn7oKu/tvBvylF4/Y8tTaOcjMSMm2jsJJNABdabxdNEHGjGYC9eLYUink5V3wv3K7RHCfClQEeNxoSasZApmJ1HIPXTFOxV00oLNZrsiucN0Gr8ek0OgfeNheOjmBzFTVC9fzi5tBhY3r462xXby0K2PIqbF9D3htONRxPRTnttMk3LxYD0jMq9gb5TBfSJZ4HNGIQnjHxKWo3aWjuqTnn7QPAkJfrkJlhNg8GhSPlbtYcpUJ+NWLYJc/plOLqqAdYrdX5q/BEMUgf6hJqNcO3XJS+4xjTzbnsoAQoDoMmqJgR9Z+GbIYemVq0KccgjGDmErJtyW/rWo=
  on_success: change
  on_failure: always
#after_script:
#- "php ./docversions.php"